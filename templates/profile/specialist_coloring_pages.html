{% load static %}
<!doctype html>
<html lang="uk">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–†–æ–∑–º–∞–ª—å–æ–≤–∫–∏ ‚Äî –ü—Ä–æ—Ñ—ñ–ª—å —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/specialist.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
</head>

<body>
    <div class="shell">
        {% include 'includes/specialist_sidebar.html' with active='coloring' %}

        <main class="main">
            <header class="top">
                <div class="top__left"></div>
                <div class="top__right">
                    <div class="chip chip--user">
                        <span class="chip__avatar" aria-hidden="true">üë©‚Äçüè´</span>
                        <span class="chip__text">{{ username }}</span>
                    </div>
                </div>
            </header>

            <section class="content">
                <div class="page-title">
                    <h1 class="page-title__h">–†–æ–∑–º–∞–ª—å–æ–≤–∫–∏</h1>
                    <div class="page-title__sub">–ó–∞–≤–∞–Ω—Ç–∞–∂—É–π—Ç–µ PDF –∞–±–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (PNG/JPG)</div>
                </div>

                <div class="grid">
                    <section class="card">
                        <div class="card__head">
                            <h2 class="card__title">–î–æ–¥–∞—Ç–∏ —Ä–æ–∑–º–∞–ª—å–æ–≤–∫—É</h2>
                        </div>

                        <form class="s-form" method="post" enctype="multipart/form-data"
                            action="{% url 'specialist_coloring_pages' %}">
                            {% csrf_token %}

                            <div class="field">
                                <label class="label" for="id_title">–ù–∞–∑–≤–∞</label>
                                <input class="input" id="id_title" name="title" type="text" maxlength="120" required
                                    value="{{ form.title.value|default:'' }}" placeholder="–ù–∞–∑–≤–∞ —Ä–æ–∑–º–∞–ª—å–æ–≤–∫–∏">
                                {% if form.title.errors %}
                                <div class="error">{{ form.title.errors|striptags }}</div>
                                {% endif %}
                            </div>

                            <div class="field">
                                <label class="label" for="id_file">–§–∞–π–ª</label>
                                <input class="input input--file" id="id_file" name="file" type="file" required
                                    accept="application/pdf,image/png,image/jpeg">
                                <div class="hint">–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è PDF, PNG, JPG/JPEG (–¥–æ 12MB).</div>
                                {% if form.file.errors %}
                                <div class="error">{{ form.file.errors|striptags }}</div>
                                {% endif %}
                            </div>

                            <div class="field">
                                <label class="check">
                                    <input class="check__box" type="checkbox" name="is_active" {% if
                                        form.is_active.value %}checked{% endif %}>
                                    <span class="check__label">–ê–∫—Ç–∏–≤–Ω–∞ (–¥–æ—Å—Ç—É–ø–Ω–∞ –¥—ñ—Ç—è–º)</span>
                                </label>
                                {% if form.is_active.errors %}
                                <div class="error">{{ form.is_active.errors|striptags }}</div>
                                {% endif %}
                            </div>

                            {% if form.non_field_errors %}
                            <div class="error">{{ form.non_field_errors|striptags }}</div>
                            {% endif %}

                            <button class="student__btn" type="submit">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
                        </form>
                    </section>

                    <section class="card">
                        <div class="card__head">
                            <h2 class="card__title">–ú–æ—ó —Ñ–∞–π–ª–∏</h2>
                        </div>

                        {% if pages %}
                        <div class="files" aria-label="–°–ø–∏—Å–æ–∫ —Ä–æ–∑–º–∞–ª—å–æ–≤–æ–∫">
                            {% for p in pages %}
                            <div class="file-row">
                                <div class="file-row__meta">
                                    <div class="file-row__title">{{ p.title }}</div>
                                    <div class="file-row__sub">
                                        {% if p.file_type == 'pdf' %}PDF{% else %}–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è{% endif %} ¬∑ {% if
                                        p.is_active %}–ê–∫—Ç–∏–≤–Ω–∞{% else %}–í–∏–º–∫–Ω–µ–Ω–∞{% endif %}
                                    </div>
                                    {% if p.file_url %}
                                    <div class="file-row__preview">
                                        {% if p.file_type == 'image' %}
                                        <img class="file-row__img" src="{{ p.file_url }}" alt="{{ p.title|escape }}">
                                        {% else %}
                                        <a class="student__btn student__btn--ghost" href="{{ p.file_url }}"
                                            target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ PDF</a>
                                        {% endif %}
                                    </div>
                                    {% endif %}
                                </div>

                                <form method="post" action="{% url 'specialist_coloring_page_delete' p.id %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="next" value="{% url 'specialist_coloring_pages' %}">
                                    <button class="student__btn student__btn--danger" type="submit"
                                        data-confirm="–í–∏–¥–∞–ª–∏—Ç–∏ ¬´{{ p.title|escapejs }}¬ª?">üóë</button>
                                </form>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="student-search__empty">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ä–æ–∑–º–∞–ª—å–æ–≤–æ–∫.</div>
                        {% endif %}
                    </section>
                </div>
            </section>
        </main>
    </div>
    {% include 'includes/footer.html' %}
</body>

</html>