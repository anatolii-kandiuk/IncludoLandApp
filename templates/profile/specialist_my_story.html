{% load static %}
<!doctype html>
<html lang="uk">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ú–æ—è —ñ—Å—Ç–æ—Ä—ñ—è ‚Äî –ü—Ä–æ—Ñ—ñ–ª—å —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/specialist.css' %}">
    <link rel="stylesheet" href="{% static 'css/specialist_my_story.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
</head>

<body>
    <div class="shell">
        {% include 'includes/specialist_sidebar.html' with active='my_story' %}

        <main class="main">
            <header class="top">
                <div class="top__left"></div>
                <div class="top__right">
                    <div class="chip chip--user">
                        <span class="chip__avatar" aria-hidden="true">üë©‚Äçüè´</span>
                        <span class="chip__text">{{ username }}</span>
                    </div>
                </div>
            </header>

            <section class="content">
                <div class="page-title">
                    <h1 class="page-title__h">–ú–æ—è —ñ—Å—Ç–æ—Ä—ñ—è: –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h1>
                </div>

                <section class="card card--full">
                    <div class="card__head">
                        <h2 class="card__title">–î–æ–¥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h2>
                    </div>

                    <form method="post" enctype="multipart/form-data" action="{% url 'specialist_my_story' %}"
                        class="chart-filters">
                        {% csrf_token %}

                        <input class="chart-filters__control" name="title" maxlength="120"
                            placeholder="–ù–∞–∑–≤–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" value="{{ form.title.value|default:'' }}" required>
                        <input class="chart-filters__control" type="file" name="image" accept="image/*" required>

                        <label class="chart-filters__control story-inline-check">
                            <input type="checkbox" name="is_active" value="true" 
                            {% if form.is_active.value or form.is_active.value is None %}checked{% endif %}>
                            <span>–ê–∫—Ç–∏–≤–Ω–µ</span>
                        </label>

                        <button class="chart-filters__btn" type="submit">–î–æ–¥–∞—Ç–∏</button>
                    </form>

                    {% if form.errors %}
                    <div class="form-errors u-mt-12" role="alert">
                        {{ form.errors }}
                    </div>
                    {% endif %}

                    <div class="story-help">
                        –ü–æ—Ä–∞–¥–∞: –¥–æ–¥–∞–≤–∞–π—Ç–µ —è—Å–∫—Ä–∞–≤—ñ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∑ –≤–∏—Ä–∞–∑–Ω–∏–º–∏ –≥–µ—Ä–æ—è–º–∏ —Ç–∞ –¥—ñ—è–º–∏.
                    </div>
                </section>

                <section class="card card--full u-mt-18">
                    <div class="card__head">
                        <h2 class="card__title">–°–ø–∏—Å–æ–∫ –∑–æ–±—Ä–∞–∂–µ–Ω—å</h2>
                        <div class="card__meta">–¶—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω—ñ –¥—ñ—Ç—è–º —É ¬´–ú–æ—è —ñ—Å—Ç–æ—Ä—ñ—è¬ª.</div>
                    </div>

                    {% if images %}
                    <div class="table" role="table" aria-label="–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
                        <div class="table__row table__row--head" role="row">
                            <div class="table__cell" role="columnheader">–ö–∞—Ä—Ç–∏–Ω–∫–∞</div>
                            <div class="table__cell" role="columnheader">–ù–∞–∑–≤–∞</div>
                            <div class="table__cell" role="columnheader">–°—Ç–∞—Ç—É—Å</div>
                            <div class="table__cell" role="columnheader"></div>
                        </div>

                        {% for img in images %}
                        <div class="table__row" role="row">
                            <div class="table__cell" role="cell">
                                <div class="story-thumb" 
                                {% if img.safe_image_url %}style="background-image: url('{{ img.safe_image_url }}');" {% endif %}></div>
                            </div>
                            <div class="table__cell table__cell--strong" role="cell">{{ img.title }}</div>
                            <div class="table__cell" role="cell">
                                {% if img.is_active %}
                                <span class="badge badge--green">–ê–∫—Ç–∏–≤–Ω–µ</span>
                                {% else %}
                                <span class="badge badge--locked">–í–∏–º–∫–Ω–µ–Ω–æ</span>
                                {% endif %}
                            </div>
                            <div class="table__cell table__actions" role="cell">
                                <form method="post" action="{% url 'specialist_my_story_delete' img.id %}" class="u-m0">
                                    {% csrf_token %}
                                    <input type="hidden" name="next" value="{% url 'specialist_my_story' %}">
                                    <button class="table__btn table__btn--danger" type="submit"
                                        data-confirm="–í–∏–¥–∞–ª–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ¬´{{ img.title|escapejs }}¬ª?">üóë
                                        –í–∏–¥–∞–ª–∏—Ç–∏</button>
                                </form>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="empty">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–æ–±—Ä–∞–∂–µ–Ω—å. –î–æ–¥–∞–π—Ç–µ –ø–µ—Ä—à–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∏—â–µ.</div>
                    {% endif %}
                </section>
            </section>
        </main>
    </div>
    {% include 'includes/footer.html' %}
</body>

</html>