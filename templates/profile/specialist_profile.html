{% load static %}
<!doctype html>
<html lang="uk">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ü—Ä–æ—Ñ—ñ–ª—å —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞ ‚Äî IncludoLand</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/specialist.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
    <script src="{% static 'js/specialist_charts.js' %}" defer></script>
</head>

<body>
    {% include 'includes/header.html' %}
    <div class="shell">
        <aside class="sidebar" aria-label="–ù–∞–≤—ñ–≥–∞—Ü—ñ—è">
            <div class="sidebar__brand">
                <div class="brand__mark" aria-hidden="true">
                    <svg viewBox="0 0 48 48" role="img" focusable="false">
                        <path d="M8 12c8 0 12 4 16 8 4-4 8-8 16-8v24c-8 0-12 4-16 8-4-4-8-8-16-8V12z" fill="#ffffff" />
                        <path d="M8 12c8 0 12 4 16 8 4-4 8-8 16-8" fill="none" stroke="#0f7aa5" stroke-width="3"
                            stroke-linecap="round" />
                    </svg>
                </div>
                <div class="brand__text"><span class="brand__name">IncludoLand</span></div>
            </div>

            <nav class="nav">
                <div class="nav__section" aria-label="–ì–æ–ª–æ–≤–Ω–µ">
                    <a class="nav__item nav__item--active" href="{% url 'specialist_profile' %}">
                        <span class="nav__icon" aria-hidden="true">üè†</span>
                        <span class="nav__label">–ú–æ—ó –£—á–Ω—ñ</span>
                    </a>
                    <a class="nav__item" href="{% url 'home' %}">
                        <span class="nav__icon" aria-hidden="true">üë•</span>
                        <span class="nav__label">–£—á–Ω—ñ</span>
                    </a>
                    <a class="nav__item" href="{% url 'home' %}">
                        <span class="nav__icon" aria-hidden="true">ü§ñ</span>
                        <span class="nav__label">ML-–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</span>
                    </a>
                </div>

                <div class="nav__section" aria-label="–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞">
                    <div class="nav__title">–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</div>
                    <a class="nav__item" href="{% url 'specialist_stories' %}">
                        <span class="nav__icon" aria-hidden="true">üìñ</span>
                        <span class="nav__label">–ö–∞–∑–∫–∏</span>
                    </a>
                    <a class="nav__item" href="{% url 'specialist_sounds' %}">
                        <span class="nav__icon" aria-hidden="true">üîä</span>
                        <span class="nav__label">–ó–≤—É–∫–∏</span>
                    </a>
                </div>

                <div class="nav__section" aria-label="–Ü–≥—Ä–∏">
                    <div class="nav__title">–Ü–≥—Ä–∏</div>
                    <a class="nav__item" href="{% url 'games' %}">
                        <span class="nav__icon" aria-hidden="true">üß©</span>
                        <span class="nav__label">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ü–≥–æ—Ä</span>
                    </a>
                    <a class="nav__item" href="{% url 'game_words' %}">
                        <span class="nav__icon" aria-hidden="true">üî§</span>
                        <span class="nav__label">–ü–∞–∑–ª–∏ —Å–ª—ñ–≤</span>
                    </a>
                    <a class="nav__item" href="{% url 'game_memory' %}">
                        <span class="nav__icon" aria-hidden="true">üß†</span>
                        <span class="nav__label">–ü–∞–º º—è—Ç—å</span>
                    </a>
                    <a class="nav__item" href="{% url 'game_attention' %}">
                        <span class="nav__icon" aria-hidden="true">üéØ</span>
                        <span class="nav__label">–£–≤–∞–≥–∞</span>
                    </a>
                    <a class="nav__item" href="{% url 'game_math' %}">
                        <span class="nav__icon" aria-hidden="true">‚ûó</span>
                        <span class="nav__label">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</span>
                    </a>
                </div>

                <div class="nav__spacer"></div>

                <a class="nav__item nav__item--logout" href="{% url 'logout' %}">
                    <span class="nav__icon" aria-hidden="true">‚éã</span>
                    <span class="nav__label">–í–∏—Ö—ñ–¥</span>
                </a>
            </nav>

            <section class="helper helper--sidebar" aria-label="–ü—ñ–¥–∫–∞–∑–∫–∞">
                <div class="helper__owl" aria-hidden="true">
                    <div class="owl">
                        <div class="owl__face"></div>
                        <div class="owl__eyes"><span></span><span></span></div>
                        <div class="owl__beak"></div>
                    </div>
                </div>
                <div class="helper__bubble">
                    <div class="helper__title">–í—ñ—Ç–∞—é!</div>
                    <div class="helper__text">–£—Å–ø—ñ—à–Ω–æ–≥–æ –¥–Ω—è!</div>
                </div>
            </section>
        </aside>

        <main class="main">
            <header class="top">
                <div class="top__left"></div>
                <div class="top__right">
                    <div class="chip chip--user">
                        <span class="chip__avatar" aria-hidden="true">üë©‚Äçüè´</span>
                        <span class="chip__text">{{ username }}</span>
                    </div>
                    <div class="chip">
                        <span class="chip__icon" aria-hidden="true">‚òÖ</span>
                        <span class="chip__text">{{ coins }}</span>
                    </div>
                    <div class="chip chip--icon" title="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è">
                        <span aria-hidden="true">üí¨</span>
                    </div>
                    <div class="chip chip--icon" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">
                        <span aria-hidden="true">üîî</span>
                    </div>
                </div>
            </header>

            <section class="content">
                <div class="page-title">
                    <h1 class="page-title__h">–ú–æ—ó –£—á–Ω—ñ</h1>
                </div>

                <div class="grid">
                    <section class="card">
                        <div class="card__head">
                            <h2 class="card__title">–ü–æ—Ç—Ä–µ–±—É—é—Ç—å –£–≤–∞–≥–∏</h2>
                        </div>

                        <div class="attention">
                            {% for s in attention_students %}
                            <div class="student">
                                <div class="student__avatar" aria-hidden="true">üë¶</div>
                                <div class="student__meta">
                                    <div class="student__name">{{ s.name }}</div>
                                    <div class="student__sub">{{ s.subtitle }}</div>
                                    <div class="student__bar" role="progressbar" aria-valuenow="{{ s.progress }}"
                                        aria-valuemin="0" aria-valuemax="100">
                                        <div class="student__fill" style="width: {{ s.progress }}%"></div>
                                    </div>
                                </div>
                                <button class="student__btn" type="button">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</button>
                            </div>
                            {% endfor %}
                        </div>
                    </section>

                    <section class="card">
                        <div class="card__head">
                            <h2 class="card__title">–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –£—á–Ω—ñ–≤ –∑–∞ –¢–∏–∂–¥–µ–Ω—å</h2>
                            <div class="legend" aria-label="–õ–µ–≥–µ–Ω–¥–∞">
                                <span class="legend__item"><i class="legend__dot legend__dot--yellow"
                                        aria-hidden="true"></i>–ü–∞–º º—è—Ç—å</span>
                                <span class="legend__item"><i class="legend__dot legend__dot--teal"
                                        aria-hidden="true"></i>–õ–æ–≥—ñ–∫–∞</span>
                            </div>
                        </div>
                        <canvas id="activityChart" height="160" data-labels='{{ activity_labels|safe }}'
                            data-yellow='{{ activity_yellow|safe }}' data-teal='{{ activity_teal|safe }}'></canvas>
                    </section>

                    <section class="card card--full">
                        <div class="card__head">
                            <h2 class="card__title">–ü–æ—Ä–∞–¥–∏ –®—Ç—É—á–Ω–æ–≥–æ –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É</h2>
                        </div>
                        <div class="ai">
                            <div class="ai__text">
                                –ù–∞ –æ—Å–Ω–æ–≤—ñ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –¥–∞–Ω–∏—Ö, —Ä–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≥—Ä—É–ø–æ–≤—ñ –∑–∞–Ω—è—Ç—Ç—è –Ω–∞ —Ä–æ–∑–≤–∏—Ç–æ–∫ –Ω–∞–≤–∏—á–æ–∫
                                "–£–≤–∞–≥–∏" –¥–ª—è —É—á–Ω—ñ–≤.
                            </div>
                            <a class="ai__btn" href="{% url 'game_memory' %}">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è</a>
                        </div>
                    </section>

                    <section class="card card--full">
                        <div class="card__head">
                            <h2 class="card__title">–ü–æ—à—É–∫ —É—á–Ω—ñ–≤</h2>
                        </div>

                        <form class="student-search" action="{% url 'specialist_profile' %}" method="get">
                            <input class="student-search__input" type="search" name="q" value="{{ q }}"
                                placeholder="–ü–æ—à—É–∫ –∑–∞ –ª–æ–≥—ñ–Ω–æ–º/—ñ–º º—è–º" aria-label="–ü–æ—à—É–∫ —É—á–Ω—ñ–≤">
                            <button class="student-search__btn" type="submit">–ó–Ω–∞–π—Ç–∏</button>
                        </form>

                        {% if q %}
                        <div class="student-search__results" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É">
                            {% if search_results %}
                            {% for s in search_results %}
                            <div class="student-row">
                                <div class="student-row__left">
                                    <div class="student-row__avatar" aria-hidden="true">üë¶</div>
                                    <div class="student-row__meta">
                                        <div class="student-row__name">{{ s.user.username }}</div>
                                        <div class="student-row__sub">–î–∏—Ç—è—á–∏–π –ø—Ä–æ—Ñ—ñ–ª—å</div>
                                    </div>
                                </div>
                                <form action="{% url 'specialist_add_student' %}" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="child_id" value="{{ s.id }}">
                                    <input type="hidden" name="next"
                                        value="{% url 'specialist_profile' %}?q={{ q|urlencode }}">
                                    <button class="student-row__btn" type="submit">–î–æ–¥–∞—Ç–∏</button>
                                </form>
                            </div>
                            {% endfor %}
                            {% else %}
                            <div class="student-search__empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>
                            {% endif %}
                        </div>
                        {% endif %}
                    </section>

                    <section class="card card--full">
                        <div class="card__head">
                            <h2 class="card__title">–î–æ–¥–∞–Ω—ñ —É—á–Ω—ñ</h2>
                        </div>

                        {% if my_students %}
                        <div class="student-list" aria-label="–ú–æ—ó –¥–æ–¥–∞–Ω—ñ —É—á–Ω—ñ">
                            {% for s in my_students %}
                            <div class="student-row">
                                <div class="student-row__left">
                                    <div class="student-row__avatar" aria-hidden="true">üë¶</div>
                                    <div class="student-row__meta">
                                        <div class="student-row__name">{{ s.user.username }}</div>
                                        <div class="student-row__sub">–ó—ñ—Ä–∫–∏: {{ s.stars }}</div>
                                    </div>
                                </div>
                                <div class="student-row__actions">
                                    <a class="student-row__link"
                                        href="{% url 'specialist_student_stats' s.id %}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                                    <form action="{% url 'specialist_remove_student' s.id %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="next" value="{% url 'specialist_profile' %}">
                                        <button class="student-row__btn student-row__btn--danger"
                                            type="submit">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                                    </form>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="student-search__empty">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –¥–æ–¥–∞–Ω–∏—Ö —É—á–Ω—ñ–≤.</div>
                        {% endif %}
                    </section>
                </div>
            </section>
        </main>
    </div>
</body>

</html>