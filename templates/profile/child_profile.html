{% load static %}
<!doctype html>
<html lang="uk">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ü—Ä–æ—Ñ—ñ–ª—å ‚Äî IncludoLand</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/child_profile.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
    <script src="{% static 'js/profile_charts.js' %}" defer></script>
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
</head>

<body>
    {% include 'includes/header.html' %}
    <main class="page profile">
        <div class="child-dashboard">
            <section class="card child-card child-card--rewards">
                <div class="card__header">
                    <h2 class="card__title">–¢–≤–æ—ó –ù–∞–≥–æ—Ä–æ–¥–∏</h2>
                </div>

                <div class="badges badges--dashboard" aria-label="–î–æ—Å—è–≥–Ω—É—Ç—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏">
                    {% for r in rewards_unlocked %}
                    <div class="badge badge--{{ r.tone }} {% if not r.unlocked %}badge--locked{% endif %}">
                        <div class="badge__icon" aria-hidden="true">
                            {% if r.icon == 'book' %}üìï{% elif r.icon == 'calc' %}üßÆ{% elif r.icon == 'compass' %}üß≠{% elif r.icon == 'mouth' %}üëÑ{% else %}üéØ{% endif %}
                        </div>
                        <div class="badge__text">
                            <div class="badge__title">{{ r.title }}</div>
                            <div class="badge__sub">{% if not r.unlocked %}üîí {% endif %}{{ r.subtitle }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                {% if rewards_locked %}
                <details class="rewards-more">
                    <summary class="rewards-more__summary" aria-label="–ü–æ–∫–∞–∑–∞—Ç–∏ –Ω–µ –¥–æ—Å—è–≥–Ω—É—Ç—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏">
                        <span class="rewards-more__label">–ù–µ –¥–æ—Å—è–≥–Ω—É—Ç—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏</span>
                        <span class="rewards-more__chev" aria-hidden="true">‚åÑ</span>
                    </summary>

                    <div class="badges badges--dashboard badges--locked" aria-label="–ù–µ –¥–æ—Å—è–≥–Ω—É—Ç—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏">
                        {% for r in rewards_locked %}
                        <div class="badge badge--{{ r.tone }} badge--locked">
                            <div class="badge__icon" aria-hidden="true">
                                {% if r.icon == 'book' %}üìï{% elif r.icon == 'calc' %}üßÆ{% elif r.icon == 'compass' %}üß≠{% elif r.icon == 'mouth' %}üëÑ{% else %}üéØ{% endif %}
                            </div>
                            <div class="badge__text">
                                <div class="badge__title">{{ r.title }}</div>
                                <div class="badge__sub">üîí {{ r.subtitle }}</div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </details>
                {% endif %}
            </section>

            <a class="dash-tile" href="{% url 'home' %}#games" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —ñ–≥–æ—Ä">
                <div class="dash-tile__icon" aria-hidden="true">üéÆ</div>
                <div class="dash-tile__label">–ê–ö–¢–ò–í–ù–û–°–¢–Ü</div>
            </a>

            <section class="card child-card child-card--progress">
                <div class="card__header">
                    <h2 class="card__title">–ü—Ä–æ–≥—Ä–µ—Å –ó–∞–≤–¥–∞–Ω—å</h2>
                </div>
                <div class="card__meta">–ö–∞–∑–∫–∏: {{ stories_listens_count }}</div>

                <div class="progress-list">
                    {% for p in progress %}
                    <div class="progress-item">
                        <div class="progress-item__row">
                            <span class="progress-item__label">{{ p.label }}</span>
                            <span class="progress-item__value">{{ p.value }}%</span>
                        </div>
                        <div class="progress-item__bar" role="progressbar" aria-valuenow="{{ p.value }}"
                            aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-item__fill" data-width="{{ p.value }}"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <div class="helper helper--inline" aria-label="–ü—ñ–¥–∫–∞–∑–∫–∞">
                    <div class="helper__owl" aria-hidden="true">
                        <div class="owl">
                            <div class="owl__face"></div>
                            <div class="owl__eyes"><span></span><span></span></div>
                            <div class="owl__beak"></div>
                        </div>
                    </div>
                    <div class="helper__bubble">
                        <div class="helper__text">–ü–æ–±—ñ–ª—å—à–µ —Ç–∞–∫ –≥—Ä–∞—Ç–∏!</div>
                    </div>
                </div>
            </section>

            <section class="card child-card child-card--perf">
                <div class="card__header">
                    <h2 class="card__title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ</h2>
                </div>
                <canvas id="lineChart" height="220" data-labels='{{ line_labels|safe }}'
                    data-datasets='{{ line_datasets|safe }}'></canvas>
            </section>

            <section class="card child-card child-card--skills">
                <div class="card__header">
                    <h2 class="card__title">–ù–∞–≤–∏—á–∫–∏</h2>
                </div>
                <canvas id="radarChart" height="240" data-labels='{{ radar_labels|safe }}'
                    data-values='{{ radar_values|safe }}'></canvas>
            </section>
        </div>
    </main>
    {% include 'includes/footer.html' %}
</body>

</html>