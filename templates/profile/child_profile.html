{% load static %}
<!doctype html>
<html lang="uk">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ü—Ä–æ—Ñ—ñ–ª—å –¥–∏—Ç–∏–Ω–∏ ‚Äî IncludoLand</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
    <script src="{% static 'js/profile_charts.js' %}" defer></script>
</head>

<body>
    <main class="page profile">
        <header class="topbar">
            <a class="brand" href="/" aria-label="–ù–∞ –≥–æ–ª–æ–≤–Ω—É">
                <div class="brand__mark" aria-hidden="true">
                    <svg viewBox="0 0 48 48" role="img" focusable="false">
                        <path d="M8 12c8 0 12 4 16 8 4-4 8-8 16-8v24c-8 0-12 4-16 8-4-4-8-8-16-8V12z" fill="#ffffff" />
                        <path d="M8 12c8 0 12 4 16 8 4-4 8-8 16-8" fill="none" stroke="#0f7aa5" stroke-width="3"
                            stroke-linecap="round" />
                    </svg>
                </div>
                <div class="brand__text"><span class="brand__name">IncludoLand</span></div>
            </a>

            <div class="status" aria-label="–ü—Ä–æ—Ñ—ñ–ª—å">
                <div class="status__item status__user">
                    <span class="status__avatar" aria-hidden="true">üë§</span>
                    <span class="status__value">{{ username }}</span>
                </div>
                <div class="status__item">
                    <span class="status__value">{{ stars }}</span>
                    <span class="status__label">–∑—ñ—Ä–æ–∫</span>
                    <span class="status__icon" aria-hidden="true">‚òÖ</span>
                </div>
                <a class="status__item status__logout" href="{% url 'logout' %}" title="–í–∏–π—Ç–∏">–í–∏–π—Ç–∏</a>
            </div>
        </header>

        <div class="profile-grid">
            <section class="card card--wide">
                <div class="card__header">
                    <h2 class="card__title">–¢–≤–æ—ó –ù–∞–≥–æ—Ä–æ–¥–∏</h2>
                </div>

                <div class="rewards">
                    <div class="badges">
                        {% for r in rewards %}
                        <div class="badge badge--{{ r.tone }}">
                            <div class="badge__icon" aria-hidden="true">
                                {% if r.icon == 'book' %}üìï{% elif r.icon == 'calc' %}üßÆ{% elif r.icon == 'compass'
                                %}üß≠{% else %}üéØ{% endif %}
                            </div>
                            <div class="badge__text">
                                <div class="badge__title">{{ r.title }}</div>
                                <div class="badge__sub">{{ r.subtitle }}</div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="quick">
                        <a class="quick__btn quick__btn--blue" href="{% url 'stories' %}">
                            <span class="quick__icon" aria-hidden="true">üìò</span>
                            <span>–ö–ê–ó–ö–ò</span>
                        </a>
                        <a class="quick__btn quick__btn--yellow" href="{% url 'rewards' %}">
                            <span class="quick__icon" aria-hidden="true">üõ°Ô∏è</span>
                            <span>–ù–ê–ì–û–†–û–î–ò</span>
                        </a>
                    </div>
                </div>

                <div class="progress-block">
                    <h3 class="card__subtitle">–ü—Ä–æ–≥—Ä–µ—Å –ó–∞–≤–¥–∞–Ω—å</h3>
                    <div class="progress-list">
                        {% for p in progress %}
                        <div class="progress-item">
                            <div class="progress-item__row">
                                <span class="progress-item__label">{{ p.label }}</span>
                                <span class="progress-item__value">{{ p.value }}%</span>
                            </div>
                            <div class="progress-item__bar" role="progressbar" aria-valuenow="{{ p.value }}"
                                aria-valuemin="0" aria-valuemax="100">
                                <div class="progress-item__fill" style="width: {{ p.value }}%"></div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="helper helper--inline" aria-label="–ü—ñ–¥–∫–∞–∑–∫–∞">
                        <div class="helper__owl" aria-hidden="true">
                            <div class="owl">
                                <div class="owl__face"></div>
                                <div class="owl__eyes"><span></span><span></span></div>
                                <div class="owl__beak"></div>
                            </div>
                        </div>
                        <div class="helper__bubble">
                            <div class="helper__text">–ü–æ–±—ñ–ª—å—à–µ —Ç–∞–∫ –≥—Ä–∞—Ç–∏!</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="card__header">
                    <h2 class="card__title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ</h2>
                </div>
                <canvas id="lineChart" height="180" data-labels='{{ line_labels|safe }}'
                    data-values='{{ line_values|safe }}'></canvas>
            </section>

            <section class="card">
                <div class="card__header">
                    <h2 class="card__title">–ù–∞–≤–∏—á–∫–∏</h2>
                </div>
                <canvas id="radarChart" height="200" data-labels='{{ radar_labels|safe }}'
                    data-values='{{ radar_values|safe }}'></canvas>
            </section>
        </div>
    </main>
</body>

</html>